<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>iX Coin Game</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-color: #6a11cb;
            --secondary-color: #2575fc;
            --background-color: #f5f5f5;
            --card-color: #ffffff;
            --text-color: #333333;
            --border-color: #dddddd;
            --button-shadow: 0 4px 0 #4a4a4a;
            --button-active: translateY(4px);
        }

        [data-theme="dark"] {
            --primary-color: #8b5cf6;
            --secondary-color: #3b82f6;
            --background-color: #1a1a1a;
            --card-color: #2d2d2d;
            --text-color: #ffffff;
            --border-color: #444444;
            --button-shadow: 0 4px 0 #1a1a1a;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--background-color);
            color: var(--text-color);
            transition: all 0.3s ease;
        }

        .container {
            max-width: 100%;
            min-height: 100vh;
            padding: 20px;
            padding-bottom: 80px;
        }

        /* –ê–¥–∞–ø—Ç–∞—Ü–∏—è –¥–ª—è –∫–æ–º–ø—å—é—Ç–µ—Ä–∞ */
        @media (min-width: 768px) {
            .container {
                max-width: 400px;
                margin: 0 auto;
                padding-bottom: 20px;
            }
            
            .navigation {
                max-width: 400px;
                left: 50%;
                transform: translateX(-50%);
            }
        }

        /* –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è */
        .registration {
            background: var(--card-color);
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }

        .registration h2 {
            text-align: center;
            margin-bottom: 20px;
            color: var(--primary-color);
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
        }

        .form-group input {
            width: 100%;
            padding: 12px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            font-size: 16px;
            background: var(--card-color);
            color: var(--text-color);
        }

        /* –°—Ç–∏–ª–∏ –∫–Ω–æ–ø–æ–∫ –∫–∞–∫ –∫–ª–∞–≤–∏—à–∏ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã */
        .btn {
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.1s ease;
            box-shadow: var(--button-shadow);
            position: relative;
            border: 2px solid transparent;
        }

        .btn:active {
            transform: var(--button-active);
            box-shadow: 0 0px 0 #4a4a4a;
        }

        .btn:disabled {
            opacity: 0.6;
            transform: none;
            box-shadow: var(--button-shadow);
            cursor: not-allowed;
        }

        .btn-secondary {
            background: linear-gradient(135deg, #667eea, #764ba2);
        }

        .btn-success {
            background: linear-gradient(135deg, #00b09b, #96c93d);
        }

        .btn-warning {
            background: linear-gradient(135deg, #f7971e, #ffd200);
        }

        .btn-danger {
            background: linear-gradient(135deg, #ff416c, #ff4b2b);
        }

        .btn-collection {
            background: linear-gradient(135deg, #8e2de2, #4a00e0);
            margin: 10px 0;
        }

        /* –ù–∞–≤–∏–≥–∞—Ü–∏—è */
        .navigation {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: var(--card-color);
            display: flex;
            justify-content: space-around;
            padding: 10px 0;
            border-top: 2px solid var(--border-color);
            z-index: 1000;
        }

        .nav-btn {
            flex: 1;
            padding: 12px;
            background: none;
            border: none;
            color: var(--text-color);
            font-size: 14px;
            cursor: pointer;
            text-align: center;
            transition: all 0.3s ease;
            border-radius: 8px;
            margin: 0 5px;
        }

        .nav-btn.active {
            color: var(--primary-color);
            font-weight: 600;
            background: var(--background-color);
        }

        /* –°—Ç—Ä–∞–Ω–∏—Ü—ã */
        .page {
            display: none;
        }

        .page.active {
            display: block;
        }

        /* –ü—Ä–æ—Ñ–∏–ª—å */
        .profile-header {
            text-align: center;
            margin-bottom: 20px;
        }

        .profile-avatar {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            border-radius: 50%;
            margin: 0 auto 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
            color: white;
        }

        .balance {
            background: var(--card-color);
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            margin-bottom: 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .balance-amount {
            font-size: 32px;
            font-weight: bold;
            color: var(--primary-color);
        }

        /* –ó–∞—Ä–∞–±–æ—Ç–æ–∫ */
        .earn-section {
            background: var(--card-color);
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            margin-bottom: 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .timer {
            font-size: 18px;
            margin: 15px 0;
            padding: 10px;
            background: var(--background-color);
            border-radius: 10px;
            font-family: 'Courier New', monospace;
        }

        /* –ú–∞–≥–∞–∑–∏–Ω */
        .cases-grid {
            display: grid;
            gap: 15px;
            margin-top: 20px;
        }

        .case-item {
            background: var(--card-color);
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .case-bronze { border: 3px solid #cd7f32; }
        .case-silver { border: 3px solid #c0c0c0; }
        .case-gold { border: 3px solid #ffd700; }

        .case-price {
            font-size: 18px;
            font-weight: bold;
            margin: 10px 0;
        }

        /* –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å */
        .inventory-section {
            background: var(--card-color);
            padding: 20px;
            border-radius: 15px;
            margin-top: 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .emoji-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(70px, 1fr));
            gap: 10px;
            margin-top: 15px;
        }

        .emoji-item {
            background: var(--background-color);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            font-size: 24px;
            transition: transform 0.2s;
        }

        .emoji-item:active {
            transform: scale(0.95);
        }

        /* –ù–∞—Å—Ç—Ä–æ–π–∫–∏ */
        .settings-section {
            background: var(--card-color);
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .setting-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
            border-bottom: 1px solid var(--border-color);
        }

        .setting-item:last-child {
            border-bottom: none;
        }

        /* –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 2000;
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background: var(--card-color);
            padding: 25px;
            border-radius: 15px;
            max-width: 90%;
            width: 400px;
            max-height: 80vh;
            overflow-y: auto;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        .modal-buttons {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        .modal-buttons .btn {
            flex: 1;
        }

        /* –ö–æ–ª–ª–µ–∫—Ü–∏—è –≤ –º–æ–¥–∞–ª–∫–µ */
        .collection-section {
            margin: 15px 0;
            text-align: left;
        }

        .rarity-section {
            margin-bottom: 20px;
            padding: 15px;
            border-radius: 10px;
            background: var(--background-color);
        }

        .rarity-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
            font-weight: bold;
        }

        .rarity-progress {
            height: 8px;
            background: var(--border-color);
            border-radius: 4px;
            margin: 5px 0;
            overflow: hidden;
        }

        .rarity-progress-bar {
            height: 100%;
            border-radius: 4px;
            transition: width 0.3s ease;
        }

        .collection-emojis {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 8px;
            margin-top: 10px;
        }

        .collection-emoji {
            font-size: 20px;
            padding: 8px;
            background: var(--card-color);
            border-radius: 8px;
            text-align: center;
            transition: all 0.2s ease;
        }

        .collection-emoji.owned {
            transform: scale(1.1);
            box-shadow: 0 0 10px currentColor;
        }

        .collection-emoji.missing {
            opacity: 0.3;
            filter: grayscale(1);
        }

        /* –¶–≤–µ—Ç–∞ —Ä–µ–¥–∫–æ—Å—Ç–µ–π */
        .rarity-common { color: #969696; }
        .rarity-uncommon { color: #2ecc71; }
        .rarity-rare { color: #3498db; }
        .rarity-epic { color: #9b59b6; }
        .rarity-mythic { color: #e74c3c; }
        .rarity-legendary { color: #f1c40f; }
        .rarity-dark { color: #2c3e50; }

        .progress-common { background: #969696; }
        .progress-uncommon { background: #2ecc71; }
        .progress-rare { background: #3498db; }
        .progress-epic { background: #9b59b6; }
        .progress-mythic { background: #e74c3c; }
        .progress-legendary { background: #f1c40f; }
        .progress-dark { background: #2c3e50; }

        /* –ê–Ω–∏–º–∞—Ü–∏—è –æ—Ç–∫—Ä—ã—Ç–∏—è –∫–µ–π—Å–∞ */
        .case-animation {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.9);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 2000;
        }

        .case-reel {
            display: flex;
            overflow: hidden;
            width: 300px;
            height: 100px;
            background: var(--card-color);
            border-radius: 10px;
            position: relative;
        }

        .reel-item {
            min-width: 100px;
            height: 100px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 40px;
            border-right: 2px solid var(--border-color);
        }

        /* –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--card-color);
            padding: 15px 20px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            z-index: 3000;
            transform: translateX(150%);
            transition: transform 0.3s ease;
        }

        .notification.show {
            transform: translateX(0);
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è -->
        <div id="registrationPage" class="page active">
            <div class="registration">
                <h2 data-lang="registration_title">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤ iX Coin Game</h2>
                <div class="form-group">
                    <label data-lang="registration_name">–ò–º—è:</label>
                    <input type="text" id="userName" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è">
                </div>
                <div class="form-group">
                    <label data-lang="registration_username">–Æ–∑–µ—Ä–Ω–µ–π–º:</label>
                    <input type="text" id="userUsername" placeholder="–£–Ω–∏–∫–∞–ª—å–Ω—ã–π —é–∑–µ—Ä–Ω–µ–π–º">
                </div>
                <div class="form-group">
                    <label data-lang="registration_birthdate">–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è:</label>
                    <input type="date" id="userBirthdate">
                </div>
                <button class="btn btn-success" onclick="showModal('confirmRegistration')" data-lang="registration_start">–ù–∞—á–∞—Ç—å –∏–≥—Ä—É</button>
            </div>
        </div>

        <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å -->
        <div id="mainPage" class="page">
            <!-- –ü—Ä–æ—Ñ–∏–ª—å -->
            <div id="profilePage" class="page active">
                <div class="profile-header">
                    <div class="profile-avatar" id="userAvatar">üë§</div>
                    <h2 id="displayName">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</h2>
                    <p id="displayUsername">@username</p>
                </div>
                
                <div class="balance">
                    <p data-lang="balance_title">–í–∞—à –±–∞–ª–∞–Ω—Å</p>
                    <div class="balance-amount" id="balanceAmount">0 iXC</div>
                </div>

                <!-- –ö–Ω–æ–ø–∫–∞ –ú–æ—è –ö–æ–ª–ª–µ–∫—Ü–∏—è -->
                <button class="btn btn-collection" onclick="showModal('collectionModal')" data-lang="collection_button">üé® –ú–æ—è –ö–æ–ª–ª–µ–∫—Ü–∏—è</button>

                <div class="settings-section">
                    <h3 data-lang="stats_title">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h3>
                    <div class="setting-item">
                        <span data-lang="stats_cases">–û—Ç–∫—Ä—ã—Ç–æ –∫–µ–π—Å–æ–≤:</span>
                        <span id="casesOpened">0</span>
                    </div>
                    <div class="setting-item">
                        <span data-lang="stats_emojis">–≠–º–æ–¥–∑–∏ –≤ –∫–æ–ª–ª–µ–∫—Ü–∏–∏:</span>
                        <span id="emojisCollected">0</span>
                    </div>
                    <div class="setting-item">
                        <span data-lang="stats_completion">–ó–∞–≤–µ—Ä—à—ë–Ω–Ω–æ—Å—Ç—å –∫–æ–ª–ª–µ–∫—Ü–∏–∏:</span>
                        <span id="collectionCompletion">0%</span>
                    </div>
                </div>
            </div>

            <!-- –ó–∞—Ä–∞–±–æ—Ç–æ–∫ -->
            <div id="earnPage" class="page">
                <div class="earn-section">
                    <h2 data-lang="earn_title">–ó–∞—Ä–∞–±–æ—Ç–∞—Ç—å iXC</h2>
                    <p data-lang="earn_description">–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É —á—Ç–æ–±—ã –ø–æ–ª—É—á–∞—Ç—å 20 iXC –∫–∞–∂–¥—ã–π —á–∞—Å</p>
                    <button class="btn btn-success" id="earnButton" onclick="showModal('confirmEarn')" data-lang="earn_claim">–ó–∞–±—Ä–∞—Ç—å 20 iXC</button>
                    <div class="timer" id="timer">00:00:00</div>
                </div>
            </div>

            <!-- –ú–∞–≥–∞–∑–∏–Ω -->
            <div id="shopPage" class="page">
                <h2 data-lang="shop_title">–ú–∞–≥–∞–∑–∏–Ω –∫–µ–π—Å–æ–≤</h2>
                <div class="cases-grid">
                    <div class="case-item case-bronze">
                        <h3 data-lang="case_bronze">–ë—Ä–æ–Ω–∑–æ–≤—ã–π –∫–µ–π—Å</h3>
                        <div class="case-price">20 iXC</div>
                        <button class="btn btn-warning" onclick="showModal('confirmBuyBronze')" data-lang="shop_buy">–ö—É–ø–∏—Ç—å</button>
                    </div>
                    <div class="case-item case-silver">
                        <h3 data-lang="case_silver">–°–µ—Ä–µ–±—Ä—è–Ω—ã–π –∫–µ–π—Å</h3>
                        <div class="case-price">60 iXC</div>
                        <button class="btn btn-secondary" onclick="showModal('confirmBuySilver')" data-lang="shop_buy">–ö—É–ø–∏—Ç—å</button>
                    </div>
                    <div class="case-item case-gold">
                        <h3 data-lang="case_gold">–ó–æ–ª–æ—Ç–æ–π –∫–µ–π—Å</h3>
                        <div class="case-price">120 iXC</div>
                        <button class="btn btn-warning" onclick="showModal('confirmBuyGold')" data-lang="shop_buy">–ö—É–ø–∏—Ç—å</button>
                    </div>
                </div>

                <!-- –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å -->
                <div class="inventory-section" id="inventorySection" style="display: none;">
                    <h3 data-lang="inventory_cases">–í–∞—à–∏ –∫–µ–π—Å—ã</h3>
                    <div class="emoji-grid" id="casesInventory"></div>
                    
                    <h3 style="margin-top: 20px;" data-lang="inventory_emojis">–ö–æ–ª–ª–µ–∫—Ü–∏—è —ç–º–æ–¥–∑–∏</h3>
                    <div class="emoji-grid" id="emojisInventory"></div>
                </div>
            </div>

            <!-- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ -->
            <div id="settingsPage" class="page">
                <div class="settings-section">
                    <h3 data-lang="settings_profile">–ü—Ä–æ—Ñ–∏–ª—å</h3>
                    <div class="setting-item">
                        <span data-lang="settings_name">–ò–º—è:</span>
                        <span id="settingsName">-</span>
                    </div>
                    <div class="setting-item">
                        <span data-lang="settings_username">–Æ–∑–µ—Ä–Ω–µ–π–º:</span>
                        <span id="settingsUsername">-</span>
                    </div>
                    <div class="setting-item">
                        <span data-lang="settings_id">ID:</span>
                        <span id="userId">-</span>
                        <button class="btn" onclick="showModal('confirmCopyId')" data-lang="settings_copy">–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
                    </div>
                </div>

                <div class="settings-section">
                    <h3 data-lang="settings_settings">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</h3>
                    <div class="setting-item">
                        <span data-lang="settings_language">–Ø–∑—ã–∫:</span>
                        <select id="languageSelect" onchange="showModal('confirmLanguage')">
                            <option value="ru">–†—É—Å—Å–∫–∏–π</option>
                            <option value="en">English</option>
                            <option value="uk">–£–∫—Ä–∞—ó–Ω—Å—å–∫–∞</option>
                        </select>
                    </div>
                    <div class="setting-item">
                        <span data-lang="settings_theme">–¢–µ–º–∞:</span>
                        <select id="themeSelect" onchange="showModal('confirmTheme')">
                            <option value="light">–°–≤–µ—Ç–ª–∞—è</option>
                            <option value="dark">–¢—ë–º–Ω–∞—è</option>
                        </select>
                    </div>
                </div>

                <div class="settings-section">
                    <h3 data-lang="settings_danger">–û–ø–∞—Å–Ω–∞—è –∑–æ–Ω–∞</h3>
                    <button class="btn btn-danger" onclick="showModal('confirmReset')" data-lang="settings_reset">–°–±—Ä–æ—Å–∏—Ç—å –∞–∫–∫–∞—É–Ω—Ç</button>
                </div>
            </div>
        </div>

        <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
        <div class="navigation" id="navigation" style="display: none;">
            <button class="nav-btn active" onclick="showPage('profilePage')" data-lang="nav_profile">–ü—Ä–æ—Ñ–∏–ª—å</button>
            <button class="nav-btn" onclick="showPage('earnPage')" data-lang="nav_earn">–ó–∞—Ä–∞–±–æ—Ç–∞—Ç—å</button>
            <button class="nav-btn" onclick="showPage('shopPage')" data-lang="nav_shop">–ú–∞–≥–∞–∑–∏–Ω</button>
            <button class="nav-btn" onclick="showPage('settingsPage')" data-lang="nav_settings">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</button>
        </div>

        <!-- –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ -->
        <div id="confirmRegistration" class="modal">
            <div class="modal-content">
                <h3 data-lang="modal_confirm_registration">–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏</h3>
                <p data-lang="modal_confirm_registration_text">–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —Å–æ–∑–¥–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç —Å —ç—Ç–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏?</p>
                <div class="modal-buttons">
                    <button class="btn btn-secondary" onclick="hideModal('confirmRegistration')" data-lang="modal_cancel">–û—Ç–º–µ–Ω–∞</button>
                    <button class="btn btn-success" onclick="registerUser()" data-lang="modal_confirm">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å</button>
                </div>
            </div>
        </div>

        <div id="confirmEarn" class="modal">
            <div class="modal-content">
                <h3 data-lang="modal_confirm_earn">–ü–æ–ª—É—á–∏—Ç—å –Ω–∞–≥—Ä–∞–¥—É</h3>
                <p data-lang="modal_confirm_earn_text">–ó–∞–±—Ä–∞—Ç—å 20 iXC?</p>
                <div class="modal-buttons">
                    <button class="btn btn-secondary" onclick="hideModal('confirmEarn')" data-lang="modal_cancel">–û—Ç–º–µ–Ω–∞</button>
                    <button class="btn btn-success" onclick="claimEarnings()" data-lang="modal_claim">–ó–∞–±—Ä–∞—Ç—å</button>
                </div>
            </div>
        </div>

        <div id="confirmBuyBronze" class="modal">
            <div class="modal-content">
                <h3 data-lang="modal_confirm_buy">–ü–æ–∫—É–ø–∫–∞ –∫–µ–π—Å–∞</h3>
                <p data-lang="modal_confirm_buy_bronze">–ö—É–ø–∏—Ç—å –ë—Ä–æ–Ω–∑–æ–≤—ã–π –∫–µ–π—Å –∑–∞ 20 iXC?</p>
                <div class="modal-buttons">
                    <button class="btn btn-secondary" onclick="hideModal('confirmBuyBronze')" data-lang="modal_cancel">–û—Ç–º–µ–Ω–∞</button>
                    <button class="btn btn-success" onclick="buyCase('bronze')" data-lang="modal_buy">–ö—É–ø–∏—Ç—å</button>
                </div>
            </div>
        </div>

        <div id="confirmBuySilver" class="modal">
            <div class="modal-content">
                <h3 data-lang="modal_confirm_buy">–ü–æ–∫—É–ø–∫–∞ –∫–µ–π—Å–∞</h3>
                <p data-lang="modal_confirm_buy_silver">–ö—É–ø–∏—Ç—å –°–µ—Ä–µ–±—Ä—è–Ω—ã–π –∫–µ–π—Å –∑–∞ 60 iXC?</p>
                <div class="modal-buttons">
                    <button class="btn btn-secondary" onclick="hideModal('confirmBuySilver')" data-lang="modal_cancel">–û—Ç–º–µ–Ω–∞</button>
                    <button class="btn btn-success" onclick="buyCase('silver')" data-lang="modal_buy">–ö—É–ø–∏—Ç—å</button>
                </div>
            </div>
        </div>

        <div id="confirmBuyGold" class="modal">
            <div class="modal-content">
                <h3 data-lang="modal_confirm_buy">–ü–æ–∫—É–ø–∫–∞ –∫–µ–π—Å–∞</h3>
                <p data-lang="modal_confirm_buy_gold">–ö—É–ø–∏—Ç—å –ó–æ–ª–æ—Ç–æ–π –∫–µ–π—Å –∑–∞ 120 iXC?</p>
                <div class="modal-buttons">
                    <button class="btn btn-secondary" onclick="hideModal('confirmBuyGold')" data-lang="modal_cancel">–û—Ç–º–µ–Ω–∞</button>
                    <button class="btn btn-success" onclick="buyCase('gold')" data-lang="modal_buy">–ö—É–ø–∏—Ç—å</button>
                </div>
            </div>
        </div>

        <div id="confirmCopyId" class="modal">
            <div class="modal-content">
                <h3 data-lang="modal_copy_id">–ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ ID</h3>
                <p data-lang="modal_copy_id_text">–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å ID –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞?</p>
                <div class="modal-buttons">
                    <button class="btn btn-secondary" onclick="hideModal('confirmCopyId')" data-lang="modal_cancel">–û—Ç–º–µ–Ω–∞</button>
                    <button class="btn btn-success" onclick="copyUserId()" data-lang="modal_copy">–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
                </div>
            </div>
        </div>

        <div id="confirmLanguage" class="modal">
            <div class="modal-content">
                <h3 data-lang="modal_change_language">–°–º–µ–Ω–∞ —è–∑—ã–∫–∞</h3>
                <p data-lang="modal_change_language_text">–ò–∑–º–µ–Ω–∏—Ç—å —è–∑—ã–∫? –≠—Ç–æ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å.</p>
                <div class="modal-buttons">
                    <button class="btn btn-secondary" onclick="hideModal('confirmLanguage')" data-lang="modal_cancel">–û—Ç–º–µ–Ω–∞</button>
                    <button class="btn btn-success" onclick="changeLanguage()" data-lang="modal_change">–ò–∑–º–µ–Ω–∏—Ç—å</button>
                </div>
            </div>
        </div>

        <div id="confirmTheme" class="modal">
            <div class="modal-content">
                <h3 data-lang="modal_change_theme">–°–º–µ–Ω–∞ —Ç–µ–º—ã</h3>
                <p data-lang="modal_change_theme_text">–ò–∑–º–µ–Ω–∏—Ç—å —Ç–µ–º—É –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞?</p>
                <div class="modal-buttons">
                    <button class="btn btn-secondary" onclick="hideModal('confirmTheme')" data-lang="modal_cancel">–û—Ç–º–µ–Ω–∞</button>
                    <button class="btn btn-success" onclick="changeTheme()" data-lang="modal_change">–ò–∑–º–µ–Ω–∏—Ç—å</button>
                </div>
            </div>
        </div>

        <div id="confirmReset" class="modal">
            <div class="modal-content">
                <h3 data-lang="modal_reset">–°–±—Ä–æ—Å –∞–∫–∫–∞—É–Ω—Ç–∞</h3>
                <p data-lang="modal_reset_text">–í–´ –£–í–ï–†–ï–ù–´? –≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–ª—å–∑—è –æ—Ç–º–µ–Ω–∏—Ç—å! –í—Å–µ –¥–∞–Ω–Ω—ã–µ –±—É–¥—É—Ç —É–¥–∞–ª–µ–Ω—ã.</p>
                <div class="modal-buttons">
                    <button class="btn btn-secondary" onclick="hideModal('confirmReset')" data-lang="modal_cancel">–û—Ç–º–µ–Ω–∞</button>
                    <button class="btn btn-danger" onclick="resetAccount()" data-lang="modal_reset_confirm">–°–±—Ä–æ—Å–∏—Ç—å</button>
                </div>
            </div>
        </div>

        <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ -->
        <div id="collectionModal" class="modal">
            <div class="modal-content">
                <h3 data-lang="collection_title">üé® –ú–æ—è –ö–æ–ª–ª–µ–∫—Ü–∏—è</h3>
                <p data-lang="collection_subtitle">–°–æ–±–µ—Ä–∏—Ç–µ –≤—Å–µ —ç–º–æ–¥–∑–∏ –∫–∞–∂–¥–æ–π —Ä–µ–¥–∫–æ—Å—Ç–∏!</p>
                
                <div id="collectionContent">
                    <!-- –ö–æ–ª–ª–µ–∫—Ü–∏—è –±—É–¥–µ—Ç –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è —á–µ—Ä–µ–∑ JavaScript -->
                </div>
                
                <div class="modal-buttons">
                    <button class="btn btn-secondary" onclick="hideModal('collectionModal')" data-lang="modal_close">–ó–∞–∫—Ä—ã—Ç—å</button>
                </div>
            </div>
        </div>

        <!-- –ê–Ω–∏–º–∞—Ü–∏—è –æ—Ç–∫—Ä—ã—Ç–∏—è –∫–µ–π—Å–∞ -->
        <div class="case-animation" id="caseAnimation">
            <div class="case-reel" id="caseReel"></div>
        </div>

        <!-- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ -->
        <div class="notification" id="notification"></div>
    </div>

    <script>
        // –°–∏—Å—Ç–µ–º–∞ –ø–µ—Ä–µ–≤–æ–¥–∞
        const translations = {
            ru: {
                registration_title: "–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤ iX Coin Game",
                registration_name: "–ò–º—è:",
                registration_username: "–Æ–∑–µ—Ä–Ω–µ–π–º:",
                registration_birthdate: "–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è:",
                registration_start: "–ù–∞—á–∞—Ç—å –∏–≥—Ä—É",
                
                balance_title: "–í–∞—à –±–∞–ª–∞–Ω—Å",
                stats_title: "–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞",
                stats_cases: "–û—Ç–∫—Ä—ã—Ç–æ –∫–µ–π—Å–æ–≤:",
                stats_emojis: "–≠–º–æ–¥–∑–∏ –≤ –∫–æ–ª–ª–µ–∫—Ü–∏–∏:",
                stats_completion: "–ó–∞–≤–µ—Ä—à—ë–Ω–Ω–æ—Å—Ç—å –∫–æ–ª–ª–µ–∫—Ü–∏–∏:",
                
                earn_title: "–ó–∞—Ä–∞–±–æ—Ç–∞—Ç—å iXC",
                earn_description: "–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É —á—Ç–æ–±—ã –ø–æ–ª—É—á–∞—Ç—å 20 iXC –∫–∞–∂–¥—ã–π —á–∞—Å",
                earn_claim: "–ó–∞–±—Ä–∞—Ç—å 20 iXC",
                
                shop_title: "–ú–∞–≥–∞–∑–∏–Ω –∫–µ–π—Å–æ–≤",
                case_bronze: "–ë—Ä–æ–Ω–∑–æ–≤—ã–π –∫–µ–π—Å",
                case_silver: "–°–µ—Ä–µ–±—Ä—è–Ω—ã–π –∫–µ–π—Å",
                case_gold: "–ó–æ–ª–æ—Ç–æ–π –∫–µ–π—Å",
                shop_buy: "–ö—É–ø–∏—Ç—å",
                
                inventory_cases: "–í–∞—à–∏ –∫–µ–π—Å—ã",
                inventory_emojis: "–ö–æ–ª–ª–µ–∫—Ü–∏—è —ç–º–æ–¥–∑–∏",
                
                settings_profile: "–ü—Ä–æ—Ñ–∏–ª—å",
                settings_name: "–ò–º—è:",
                settings_username: "–Æ–∑–µ—Ä–Ω–µ–π–º:",
                settings_id: "ID:",
                settings_copy: "–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å",
                settings_settings: "–ù–∞—Å—Ç—Ä–æ–π–∫–∏",
                settings_language: "–Ø–∑—ã–∫:",
                settings_theme: "–¢–µ–º–∞:",
                settings_danger: "–û–ø–∞—Å–Ω–∞—è –∑–æ–Ω–∞",
                settings_reset: "–°–±—Ä–æ—Å–∏—Ç—å –∞–∫–∫–∞—É–Ω—Ç",
                
                nav_profile: "–ü—Ä–æ—Ñ–∏–ª—å",
                nav_earn: "–ó–∞—Ä–∞–±–æ—Ç–∞—Ç—å",
                nav_shop: "–ú–∞–≥–∞–∑–∏–Ω",
                nav_settings: "–ù–∞—Å—Ç—Ä–æ–π–∫–∏",
                
                collection_button: "üé® –ú–æ—è –ö–æ–ª–ª–µ–∫—Ü–∏—è",
                collection_title: "üé® –ú–æ—è –ö–æ–ª–ª–µ–∫—Ü–∏—è",
                collection_subtitle: "–°–æ–±–µ—Ä–∏—Ç–µ –≤—Å–µ —ç–º–æ–¥–∑–∏ –∫–∞–∂–¥–æ–π —Ä–µ–¥–∫–æ—Å—Ç–∏!",
                collection_common: "–û–±—ã—á–Ω—ã–µ",
                collection_uncommon: "–ù–µ–æ–±—ã—á–Ω—ã–µ",
                collection_rare: "–†–µ–¥–∫–∏–µ",
                collection_epic: "–≠–ø–∏—á–µ—Å–∫–∏–µ",
                collection_mythic: "–ú–∏—Ñ–∏—á–µ—Å–∫–∏–µ",
                collection_legendary: "–õ–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–µ",
                collection_dark: "–¢—ë–º–Ω—ã–µ",
                collection_progress: "–ü—Ä–æ–≥—Ä–µ—Å—Å:",
                
                modal_confirm_registration: "–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏",
                modal_confirm_registration_text: "–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —Å–æ–∑–¥–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç —Å —ç—Ç–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏?",
                modal_confirm_earn: "–ü–æ–ª—É—á–∏—Ç—å –Ω–∞–≥—Ä–∞–¥—É",
                modal_confirm_earn_text: "–ó–∞–±—Ä–∞—Ç—å 20 iXC?",
                modal_confirm_buy: "–ü–æ–∫—É–ø–∫–∞ –∫–µ–π—Å–∞",
                modal_confirm_buy_bronze: "–ö—É–ø–∏—Ç—å –ë—Ä–æ–Ω–∑–æ–≤—ã–π –∫–µ–π—Å –∑–∞ 20 iXC?",
                modal_confirm_buy_silver: "–ö—É–ø–∏—Ç—å –°–µ—Ä–µ–±—Ä—è–Ω—ã–π –∫–µ–π—Å –∑–∞ 60 iXC?",
                modal_confirm_buy_gold: "–ö—É–ø–∏—Ç—å –ó–æ–ª–æ—Ç–æ–π –∫–µ–π—Å –∑–∞ 120 iXC?",
                modal_copy_id: "–ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ ID",
                modal_copy_id_text: "–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å ID –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞?",
                modal_change_language: "–°–º–µ–Ω–∞ —è–∑—ã–∫–∞",
                modal_change_language_text: "–ò–∑–º–µ–Ω–∏—Ç—å —è–∑—ã–∫? –≠—Ç–æ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å.",
                modal_change_theme: "–°–º–µ–Ω–∞ —Ç–µ–º—ã",
                modal_change_theme_text: "–ò–∑–º–µ–Ω–∏—Ç—å —Ç–µ–º—É –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞?",
                modal_reset: "–°–±—Ä–æ—Å –∞–∫–∫–∞—É–Ω—Ç–∞",
                modal_reset_text: "–í–´ –£–í–ï–†–ï–ù–´? –≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–ª—å–∑—è –æ—Ç–º–µ–Ω–∏—Ç—å! –í—Å–µ –¥–∞–Ω–Ω—ã–µ –±—É–¥—É—Ç —É–¥–∞–ª–µ–Ω—ã.",
                modal_close: "–ó–∞–∫—Ä—ã—Ç—å",
                
                modal_cancel: "–û—Ç–º–µ–Ω–∞",
                modal_confirm: "–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å",
                modal_claim: "–ó–∞–±—Ä–∞—Ç—å",
                modal_buy: "–ö—É–ø–∏—Ç—å",
                modal_copy: "–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å",
                modal_change: "–ò–∑–º–µ–Ω–∏—Ç—å",
                modal_reset_confirm: "–°–±—Ä–æ—Å–∏—Ç—å"
            },
            en: {
                // ... –∞–Ω–≥–ª–∏–π—Å–∫–∏–µ –ø–µ—Ä–µ–≤–æ–¥—ã (–∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ —Ä—É—Å—Å–∫–∏–º)
                collection_button: "üé® My Collection",
                collection_title: "üé® My Collection",
                collection_subtitle: "Collect all emojis of each rarity!",
                collection_common: "Common",
                collection_uncommon: "Uncommon",
                collection_rare: "Rare",
                collection_epic: "Epic",
                collection_mythic: "Mythic",
                collection_legendary: "Legendary",
                collection_dark: "Dark",
                collection_progress: "Progress:",
                modal_close: "Close"
            },
            uk: {
                // ... —É–∫—Ä–∞–∏–Ω—Å–∫–∏–µ –ø–µ—Ä–µ–≤–æ–¥—ã (–∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ —Ä—É—Å—Å–∫–∏–º)
                collection_button: "üé® –ú–æ—è –ö–æ–ª–µ–∫—Ü—ñ—è",
                collection_title: "üé® –ú–æ—è –ö–æ–ª–µ–∫—Ü—ñ—è",
                collection_subtitle: "–ó–±–µ—Ä—ñ—Ç—å –≤—Å—ñ –µ–º–æ–¥–∑—ñ –∫–æ–∂–Ω–æ—ó —Ä—ñ–¥–∫–æ—Å—Ç—ñ!",
                collection_common: "–ó–≤–∏—á–∞–π–Ω—ñ",
                collection_uncommon: "–ù–µ–∑–≤–∏—á–∞–π–Ω—ñ",
                collection_rare: "–†—ñ–¥–∫—ñ—Å–Ω—ñ",
                collection_epic: "–ï–ø—ñ—á–Ω—ñ",
                collection_mythic: "–ú—ñ—Ñ—ñ—á–Ω—ñ",
                collection_legendary: "–õ–µ–≥–µ–Ω–¥–∞—Ä–Ω—ñ",
                collection_dark: "–¢–µ–º–Ω—ñ",
                collection_progress: "–ü—Ä–æ–≥—Ä–µ—Å:",
                modal_close: "–ó–∞–∫—Ä–∏—Ç–∏"
            }
        };

        // –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∏–≥—Ä—ã
        const gameData = {
            emojis: {
                common: ['üòÄ', 'üòÉ', 'üòÑ', 'üòÅ', 'üòÜ', 'üòÖ', 'üòÇ', 'ü§£', 'üòä', 'üòá'],
                uncommon: ['ü•∞', 'üòç', 'ü§©', 'üòò', 'üòó', 'üòö', 'üòô', 'ü•≤', 'üòã', 'üòõ'],
                rare: ['üòé', 'ü§ì', 'üßê', 'üòï', 'üòü', 'üôÅ', '‚òπÔ∏è', 'üòÆ', 'üòØ', 'üò≤'],
                epic: ['ü•≥', 'üòè', 'üòí', 'üôÑ', 'üò¨', 'ü§•', 'üòå', 'üòî', 'üò™', 'ü§§'],
                mythic: ['üòà', 'üëø', 'üíÄ', '‚ò†Ô∏è', 'ü§°', 'üëπ', 'üë∫', 'üëª', 'üëΩ', 'üëæ'],
                legendary: ['ü§¥', 'üë∏', 'ü¶∏', 'ü¶π', 'üßô', 'üßö', 'üßõ', 'üßú', 'üßù', 'üßû'],
                dark: ['üîÆ', 'üíé', 'üé≠', '‚ö∞Ô∏è', 'üï∂Ô∏è', 'üé™', '‚ô†Ô∏è', '‚ô•Ô∏è', '‚ô¶Ô∏è', '‚ô£Ô∏è']
            },
            caseRates: {
                bronze: {
                    common: 50, uncommon: 25, rare: 15, epic: 7, mythic: 2, legendary: 0.9, dark: 0.1
                },
                silver: {
                    common: 30, uncommon: 25, rare: 20, epic: 15, mythic: 5, legendary: 4, dark: 1
                },
                gold: {
                    common: 10, uncommon: 15, rare: 20, epic: 25, mythic: 15, legendary: 10, dark: 5
                }
            },
            casePrices: {
                bronze: 20,
                silver: 60,
                gold: 120
            }
        };

        let timerInterval;

        // –ü–æ–∫–∞–∑–∞—Ç—å –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
        function showModal(modalId) {
            if (modalId === 'collectionModal') {
                updateCollectionModal();
            }
            document.getElementById(modalId).style.display = 'flex';
        }

        // –°–∫—Ä—ã—Ç—å –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
        function hideModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }

        // –û–±–Ω–æ–≤–∏—Ç—å –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∫–æ–ª–ª–µ–∫—Ü–∏–∏
        function updateCollectionModal() {
            const user = initUser();
            const collectionContent = document.getElementById('collectionContent');
            
            if (!user) return;
            
            let html = '';
            const totalEmojis = Object.values(gameData.emojis).flat().length;
            const ownedEmojis = user.inventory.emojis.length;
            const completionPercentage = ((ownedEmojis / totalEmojis) * 100).toFixed(1);
            
            // –û–±—â–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å
            html += `<div style="text-align: center; margin-bottom: 20px; padding: 15px; background: var(--background-color); border-radius: 10px;">
                        <h4 data-lang="collection_progress">–û–±—â–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å</h4>
                        <div style="font-size: 24px; font-weight: bold; color: var(--primary-color);">${completionPercentage}%</div>
                        <div>${ownedEmojis} / ${totalEmojis} —ç–º–æ–¥–∑–∏</div>
                    </div>`;
            
            // –ö–æ–ª–ª–µ–∫—Ü–∏—è –ø–æ —Ä–µ–¥–∫–æ—Å—Ç—è–º
            const rarities = [
                { key: 'common', name: 'collection_common' },
                { key: 'uncommon', name: 'collection_uncommon' },
                { key: 'rare', name: 'collection_rare' },
                { key: 'epic', name: 'collection_epic' },
                { key: 'mythic', name: 'collection_mythic' },
                { key: 'legendary', name: 'collection_legendary' },
                { key: 'dark', name: 'collection_dark' }
            ];
            
            rarities.forEach(rarity => {
                const emojis = gameData.emojis[rarity.key];
                const ownedRarityEmojis = user.inventory.emojis.filter(e => e.rarity === rarity.key);
                const progress = (ownedRarityEmojis.length / emojis.length) * 100;
                
                html += `
                    <div class="rarity-section ${rarity.key}">
                        <div class="rarity-header">
                            <span class="rarity-${rarity.key}" data-lang="${rarity.name}">${getTranslation(rarity.name)}</span>
                            <span>${ownedRarityEmojis.length}/${emojis.length}</span>
                        </div>
                        <div class="rarity-progress">
                            <div class="rarity-progress-bar progress-${rarity.key}" style="width: ${progress}%"></div>
                        </div>
                        <div class="collection-emojis">
                `;
                
                emojis.forEach(emoji => {
                    const isOwned = user.inventory.emojis.some(e => e.emoji === emoji && e.rarity === rarity.key);
                    html += `<div class="collection-emoji ${isOwned ? 'owned' : 'missing'} rarity-${rarity.key}">${emoji}</div>`;
                });
                
                html += `</div></div>`;
            });
            
            collectionContent.innerHTML = html;
            updateLanguage(); // –û–±–Ω–æ–≤–ª—è–µ–º –ø–µ—Ä–µ–≤–æ–¥—ã –≤–Ω—É—Ç—Ä–∏ –º–æ–¥–∞–ª–∫–∏
        }

        // –ü–æ–ª—É—á–∏—Ç—å –ø–µ—Ä–µ–≤–æ–¥
        function getTranslation(key) {
            const language = localStorage.getItem('ixLanguage') || 'ru';
            return translations[language][key] || key;
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
        function showNotification(message, type = 'info') {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.className = `notification show ${type}`;
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        function initUser() {
            if (!localStorage.getItem('ixUser')) {
                return null;
            }
            
            const user = JSON.parse(localStorage.getItem('ixUser'));
            updateTimer(user);
            updateCollectionStats(user);
            return user;
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∫–æ–ª–ª–µ–∫—Ü–∏–∏
        function updateCollectionStats(user) {
            if (!user) return;
            
            const totalEmojis = Object.values(gameData.emojis).flat().length;
            const ownedEmojis = user.inventory.emojis.length;
            const completionPercentage = ((ownedEmojis / totalEmojis) * 100).toFixed(1);
            
            document.getElementById('emojisCollected').textContent = ownedEmojis;
            document.getElementById('collectionCompletion').textContent = completionPercentage + '%';
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–∞–π–º–µ—Ä–∞
        function updateTimer(user) {
            clearInterval(timerInterval);
            
            if (!user || !user.lastClaim) {
                document.getElementById('timer').textContent = '00:00:00';
                document.getElementById('earnButton').disabled = false;
                return;
            }
            
            const lastClaim = new Date(user.lastClaim);
            const nextClaim = new Date(lastClaim.getTime() + 60 * 60 * 1000);
            const now = new Date();
            
            if (now >= nextClaim) {
                document.getElementById('timer').textContent = '00:00:00';
                document.getElementById('earnButton').disabled = false;
                return;
            }
            
            document.getElementById('earnButton').disabled = true;
            
            timerInterval = setInterval(() => {
                const now = new Date();
                const diff = nextClaim - now;
                
                if (diff <= 0) {
                    document.getElementById('timer').textContent = '00:00:00';
                    document.getElementById('earnButton').disabled = false;
                    clearInterval(timerInterval);
                    return;
                }
                
                const hours = Math.floor(diff / (1000 * 60 * 60));
                const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((diff % (1000 * 60)) / 1000);
                
                document.getElementById('timer').textContent = 
                    `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            }, 1000);
        }

        // –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        function registerUser() {
            const name = document.getElementById('userName').value;
            const username = document.getElementById('userUsername').value;
            const birthdate = document.getElementById('userBirthdate').value;
            
            if (!name || !username || !birthdate) {
                showNotification('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è', 'error');
                return;
            }
            
            const user = {
                id: generateId(),
                name: name,
                username: username,
                birthdate: birthdate,
                balance: 100,
                inventory: {
                    cases: [],
                    emojis: []
                },
                stats: {
                    casesOpened: 0,
                    emojisCollected: 0
                },
                lastClaim: null,
                registered: new Date().toISOString()
            };
            
            localStorage.setItem('ixUser', JSON.stringify(user));
            hideModal('confirmRegistration');
            showMainInterface();
            showNotification('–ê–∫–∫–∞—É–Ω—Ç —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω!', 'success');
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å –æ—Å–Ω–æ–≤–Ω–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
        function showMainInterface() {
            document.getElementById('registrationPage').classList.remove('active');
            document.getElementById('mainPage').style.display = 'block';
            document.getElementById('navigation').style.display = 'flex';
            
            const user = initUser();
            updateUserInterface(user);
            showPage('profilePage');
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        function updateUserInterface(user) {
            if (!user) return;
            
            document.getElementById('displayName').textContent = user.name;
            document.getElementById('displayUsername').textContent = '@' + user.username;
            document.getElementById('balanceAmount').textContent = user.balance + ' iXC';
            document.getElementById('casesOpened').textContent = user.stats.casesOpened;
            
            document.getElementById('settingsName').textContent = user.name;
            document.getElementById('settingsUsername').textContent = user.username;
            document.getElementById('userId').textContent = user.id;
            
            updateInventory(user);
            updateCollectionStats(user);
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É
        function showPage(pageId) {
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            
            document.getElementById(pageId).classList.add('active');
            
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            const user = initUser();
            if (pageId === 'shopPage' && user.inventory.cases.length > 0) {
                document.getElementById('inventorySection').style.display = 'block';
            }
        }

        // –ó–∞–±—Ä–∞—Ç—å –∑–∞—Ä–∞–±–æ—Ç–æ–∫
        function claimEarnings() {
            const user = initUser();
            const lastClaim = user.lastClaim ? new Date(user.lastClaim) : null;
            const now = new Date();
            
            if (lastClaim && (now - lastClaim) < 60 * 60 * 1000) {
                showNotification('–ü–æ–¥–æ–∂–¥–∏—Ç–µ –µ—â–µ –Ω–µ–º–Ω–æ–≥–æ!', 'error');
                return;
            }
            
            user.balance += 20;
            user.lastClaim = now.toISOString();
            
            localStorage.setItem('ixUser', JSON.stringify(user));
            updateUserInterface(user);
            updateTimer(user);
            hideModal('confirmEarn');
            
            showNotification('–í—ã –ø–æ–ª—É—á–∏–ª–∏ 20 iXC!', 'success');
        }

        // –ü–æ–∫—É–ø–∫–∞ –∫–µ–π—Å–∞
        function buyCase(caseType) {
            const user = initUser();
            const price = gameData.casePrices[caseType];
            
            if (user.balance < price) {
                showNotification('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ iXC!', 'error');
                return;
            }
            
            user.balance -= price;
            user.inventory.cases.push({
                type: caseType,
                id: generateId(),
                bought: new Date().toISOString()
            });
            
            localStorage.setItem('ixUser', JSON.stringify(user));
            updateUserInterface(user);
            hideModal('confirmBuy' + caseType.charAt(0).toUpperCase() + caseType.slice(1));
            
            showNotification('–ö–µ–π—Å –∫—É–ø–ª–µ–Ω!', 'success');
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è
        function updateInventory(user) {
            const casesInventory = document.getElementById('casesInventory');
            const emojisInventory = document.getElementById('emojisInventory');
            
            casesInventory.innerHTML = '';
            emojisInventory.innerHTML = '';
            
            user.inventory.cases.forEach((caseItem, index) => {
                const caseElement = document.createElement('div');
                caseElement.className = 'emoji-item';
                caseElement.textContent = caseItem.type === 'bronze' ? 'üì¶' : 
                                         caseItem.type === 'silver' ? 'üì¶' : 'üì¶';
                caseElement.style.cursor = 'pointer';
                caseElement.onclick = () => openCase(index);
                casesInventory.appendChild(caseElement);
            });
            
            user.inventory.emojis.forEach(emoji => {
                const emojiElement = document.createElement('div');
                emojiElement.className = `emoji-item rarity-${emoji.rarity}`;
                emojiElement.textContent = emoji.emoji;
                emojiElement.title = `–†–µ–¥–∫–æ—Å—Ç—å: ${emoji.rarity}`;
                emojisInventory.appendChild(emojiElement);
            });
        }

        // –û—Ç–∫—Ä—ã—Ç–∏–µ –∫–µ–π—Å–∞
        function openCase(caseIndex) {
            const user = initUser();
            const caseItem = user.inventory.cases[caseIndex];
            
            user.inventory.cases.splice(caseIndex, 1);
            const reward = getCaseReward(caseItem.type);
            
            if (reward.type === 'emoji') {
                user.inventory.emojis.push({
                    emoji: reward.emoji,
                    rarity: reward.rarity,
                    obtained: new Date().toISOString()
                });
                user.stats.emojisCollected++;
            } else {
                user.balance += reward.amount;
            }
            
            user.stats.casesOpened++;
            
            localStorage.setItem('ixUser', JSON.stringify(user));
            updateUserInterface(user);
            updateCollectionStats(user);
            
            showCaseAnimation(reward);
        }

        // –ü–æ–ª—É—á–µ–Ω–∏–µ –Ω–∞–≥—Ä–∞–¥—ã –∏–∑ –∫–µ–π—Å–∞
        function getCaseReward(caseType) {
            const rates = gameData.caseRates[caseType];
            const random = Math.random() * 100;
            
            let accumulated = 0;
            for (const [rarity, rate] of Object.entries(rates)) {
                accumulated += rate;
                if (random <= accumulated) {
                    const emojis = gameData.emojis[rarity];
                    const randomEmoji = emojis[Math.floor(Math.random() * emojis.length)];
                    return { type: 'emoji', emoji: randomEmoji, rarity: rarity };
                }
            }
            
            const coinAmount = caseType === 'bronze' ? 5 : caseType === 'silver' ? 15 : 30;
            return { type: 'coins', amount: coinAmount };
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å –∞–Ω–∏–º–∞—Ü–∏—é –æ—Ç–∫—Ä—ã—Ç–∏—è –∫–µ–π—Å–∞
        function showCaseAnimation(reward) {
            const animation = document.getElementById('caseAnimation');
            const reel = document.getElementById('caseReel');
            
            reel.innerHTML = '';
            
            for (let i = 0; i < 20; i++) {
                const item = document.createElement('div');
                item.className = 'reel-item';
                const allEmojis = Object.values(gameData.emojis).flat();
                item.textContent = allEmojis[Math.floor(Math.random() * allEmojis.length)];
                reel.appendChild(item);
            }
            
            const winItem = document.createElement('div');
            winItem.className = `reel-item rarity-${reward.rarity || 'common'}`;
            winItem.textContent = reward.type === 'emoji' ? reward.emoji : 'üí∞';
            reel.appendChild(winItem);
            
            animation.style.display = 'flex';
            
            setTimeout(() => {
                animation.style.display = 'none';
                const message = reward.type === 'emoji' ? 
                    `–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –í—ã –ø–æ–ª—É—á–∏–ª–∏: ${reward.emoji} (${reward.rarity})` :
                    `–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –í—ã –ø–æ–ª—É—á–∏–ª–∏: ${reward.amount} iXC`;
                showNotification(message, 'success');
            }, 3000);
        }

        // –°–º–µ–Ω–∞ —Ç–µ–º—ã
        function changeTheme() {
            const theme = document.getElementById('themeSelect').value;
            document.body.setAttribute('data-theme', theme);
            localStorage.setItem('ixTheme', theme);
            hideModal('confirmTheme');
            showNotification('–¢–µ–º–∞ –∏–∑–º–µ–Ω–µ–Ω–∞!', 'success');
        }

        // –°–º–µ–Ω–∞ —è–∑—ã–∫–∞
        function changeLanguage() {
            const language = document.getElementById('languageSelect').value;
            localStorage.setItem('ixLanguage', language);
            hideModal('confirmLanguage');
            updateLanguage();
            showNotification('–Ø–∑—ã–∫ –∏–∑–º–µ–Ω–µ–Ω!', 'success');
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —è–∑—ã–∫–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
        function updateLanguage() {
            const language = localStorage.getItem('ixLanguage') || 'ru';
            const translation = translations[language];
            
            document.querySelectorAll('[data-lang]').forEach(element => {
                const key = element.getAttribute('data-lang');
                if (translation[key]) {
                    element.textContent = translation[key];
                }
            });
        }

        // –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ ID
        function copyUserId() {
            const user = initUser();
            navigator.clipboard.writeText(user.id);
            hideModal('confirmCopyId');
            showNotification('ID —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω!', 'success');
        }

        // –°–±—Ä–æ—Å –∞–∫–∫–∞—É–Ω—Ç–∞
        function resetAccount() {
            localStorage.removeItem('ixUser');
            hideModal('confirmReset');
            setTimeout(() => {
                location.reload();
            }, 1000);
        }

        // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è ID
        function generateId() {
            return 'IX' + Date.now() + Math.random().toString(36).substr(2, 9);
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫
        function loadSettings() {
            const theme = localStorage.getItem('ixTheme') || 'light';
            const language = localStorage.getItem('ixLanguage') || 'ru';
            
            document.body.setAttribute('data-theme', theme);
            document.getElementById('themeSelect').value = theme;
            document.getElementById('languageSelect').value = language;
            
            updateLanguage();
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        window.onload = function() {
            loadSettings();
            const user = initUser();
            if (user) {
                showMainInterface();
            }
        };
    </script>
</body>
  </html>
